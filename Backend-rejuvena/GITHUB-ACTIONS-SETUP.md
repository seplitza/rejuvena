# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω workflow —Ñ–∞–π–ª `.github/workflows/deploy.yml` –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ production —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É `main`.

## üìã –ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

1. **Backend** - TypeScript –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **Admin Panel** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
3. **PM2** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç backend —Å–µ—Ä–≤–µ—Ä

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–ß—Ç–æ–±—ã GitHub Actions –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://github.com/seplitza/backend-rejuvena
2. –ù–∞–∂–º–∏—Ç–µ **Settings** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Secrets and variables** ‚Üí **Actions**
4. –ù–∞–∂–º–∏—Ç–µ **New repository secret**

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ 3 —Å–µ–∫—Ä–µ—Ç–∞

#### 1. SERVER_HOST
- **Name**: `SERVER_HOST`
- **Secret**: `37.252.20.170`

#### 2. SERVER_USER
- **Name**: `SERVER_USER`
- **Secret**: `root`

#### 3. SERVER_PASSWORD
- **Name**: `SERVER_PASSWORD`
- **Secret**: `c+d2Ei@GeWWKq8`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ push –≤ main:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** –Ω–∞ GitHub
2. –£–≤–∏–¥–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π workflow "Deploy to Production"
3. –ú–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –Ω–∞ production!

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–¢–µ–ø–µ—Ä—å –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–æ—Å—Ç–æ:

```bash
git add .
git commit -m "Your changes"
git push origin main
```

–ò –≤—Å—ë! GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç backend
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç admin panel
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç PM2
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ**: –ü–æ–∑–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH –∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è
2. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–µ–ø–ª–æ—è (–Ω–µ root)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –ø—Ä–∞–≤–∏–ª–∞

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: SSH –∫–ª—é—á–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –±–æ–ª—å—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –Ω–∞ SSH –∫–ª—é—á:

1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ SSH –∫–ª—é—á –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/deploy_key
```

2. –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
ssh-copy-id -i ~/.ssh/deploy_key.pub root@37.252.20.170
```

3. –í GitHub Secrets:
   - –£–¥–∞–ª–∏—Ç–µ `SERVER_PASSWORD`
   - –î–æ–±–∞–≤—å—Ç–µ `SERVER_SSH_KEY` —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

4. –û–±–Ω–æ–≤–∏—Ç–µ workflow - –∑–∞–º–µ–Ω–∏—Ç–µ `password:` –Ω–∞ `key:`:
```yaml
with:
  host: ${{ secrets.SERVER_HOST }}
  username: ${{ secrets.SERVER_USER }}
  key: ${{ secrets.SERVER_SSH_KEY }}
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –≤ main –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç production —Å–µ—Ä–≤–µ—Ä!
