"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[441],{4675:function(e,t,r){r.d(t,{Z:function(){return d}});var l=r(5893),s=r(645),o=r.n(s),n=r(7294),i=r(5675),a=r.n(i);function d(e){var t,r;let{exercise:s,isOpen:i,onClose:d,onCheckboxChange:c,isDone:p}=e,[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(0),[b,v]=(0,n.useState)([]);if((0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&d()};return i&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[i,d]),(0,n.useEffect)(()=>{s&&(v((s.exerciseContents||[]).filter(e=>"video"===e.type||"image"===e.type).map(e=>{let t={id:e.id||Math.random().toString(),type:e.type,contentPath:e.contentPath,loadError:!1};if("video"===e.type){let{embedUrl:r,type:l}=function(e){var t,r,l,s,o,n,i,a;if(!e)return{embedUrl:"",type:"iframe"};if(e.match(/\.(mp4|webm|ogg|mov)$/i))return{embedUrl:e,type:"video"};if(e.includes("player.vimeo.com/video/")){let r=null===(t=e.split("player.vimeo.com/video/")[1])||void 0===t?void 0:t.split("?")[0];return{embedUrl:"https://player.vimeo.com/video/".concat(r,"?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&dnt=1&controls=1&transparent=0"),type:"iframe"}}if(e.includes("youtube.com/embed/")){let t=null===(r=e.split("youtube.com/embed/")[1])||void 0===r?void 0:r.split("?")[0];return{embedUrl:"https://www.youtube.com/embed/".concat(t,"?modestbranding=1&rel=0&showinfo=0&fs=1&controls=1&disablekb=0&iv_load_policy=3&cc_load_policy=0&playsinline=1&origin=").concat(encodeURIComponent(window.location.origin)),type:"iframe"}}if(e.includes("rutube.ru/play/embed/")||e.includes("vk.com/video_ext.php")||e.includes("dzen.ru/embed/"))return{embedUrl:e,type:"iframe"};if(e.includes("youtube.com")||e.includes("youtu.be")){let t=e.includes("youtu.be")?null===(l=e.split("youtu.be/")[1])||void 0===l?void 0:l.split("?")[0]:new URL(e).searchParams.get("v");return{embedUrl:"https://www.youtube.com/embed/".concat(t,"?modestbranding=1&rel=0&showinfo=0&fs=1&controls=1&disablekb=0&iv_load_policy=3&cc_load_policy=0&playsinline=1&origin=").concat(encodeURIComponent(window.location.origin)),type:"iframe"}}if(e.includes("vimeo.com")&&!e.includes("player.vimeo.com")){let t=null===(s=e.split("vimeo.com/")[1])||void 0===s?void 0:s.split("?")[0];return{embedUrl:"https://player.vimeo.com/video/".concat(t,"?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&dnt=1&controls=1&transparent=0"),type:"iframe"}}if(e.includes("rutube.ru")){let t=null===(o=e.split("rutube.ru/video/")[1])||void 0===o?void 0:o.split("?")[0];return t||(t=null===(n=e.split("rutube.ru/play/embed/")[1])||void 0===n?void 0:n.split("?")[0]),{embedUrl:"https://rutube.ru/play/embed/".concat(t),type:"iframe"}}if(e.includes("vk.com/video")){let t=e.match(/video(-?\d+)_(\d+)/);if(t){let[,e,r]=t;return{embedUrl:"https://vk.com/video_ext.php?oid=".concat(e,"&id=").concat(r),type:"iframe"}}}if(e.includes("dzen.ru")){let t=(null===(i=e.split("dzen.ru/video/watch/")[1])||void 0===i?void 0:i.split("?")[0])||(null===(a=e.split("dzen.ru/embed/")[1])||void 0===a?void 0:a.split("?")[0]);if(t)return{embedUrl:"https://dzen.ru/embed/".concat(t),type:"iframe"}}return e.includes("t.me"),{embedUrl:e,type:"iframe"}}(e.contentPath);t.embedUrl=r,t.videoType=l}return t})),h(0))},[s]),!i||!s)return null;let f=s.exerciseName||"",g=s.marathonExerciseName||"",y=s.exerciseDescription||s.description||"";y&&(y=y.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F700}-\u{1F77F}\u{1F780}-\u{1F7FF}\u{1F800}-\u{1F8FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}](?:\u{FE0F}|\u{200D}[\u{1F3FB}-\u{1F3FF}]?)?/gu,e=>e.replace(/[\uFE0F\u200D]/g,"")));let j=s.type||"",w=s.duration||0,k=b.filter(e=>!e.loadError),N=k[x],F=e=>{v(t=>t.map((t,r)=>r===e?{...t,loadError:!0}:t))};return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm md:p-4",children:(0,l.jsxs)("div",{className:"relative w-full h-full md:max-w-3xl md:max-h-[90vh] md:h-auto bg-white md:rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-3 md:p-4 flex-shrink-0",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1 pr-2",children:[(0,l.jsx)("h2",{className:"text-lg md:text-xl font-bold mb-0.5",children:f}),g&&(0,l.jsx)("p",{className:"text-sm text-purple-100",children:g}),(j||w>0)&&(0,l.jsxs)("div",{className:"flex items-center space-x-2 mt-2 text-xs",children:[j&&(0,l.jsx)("span",{className:"flex items-center space-x-1 bg-white/20 px-2 py-0.5 rounded-full",children:(0,l.jsx)("span",{children:"Video"===j?"Видео":"Reading"===j?"Теория":"Практика"})}),w>0&&(0,l.jsx)("span",{className:"flex items-center space-x-1 bg-white/20 px-2 py-0.5 rounded-full",children:(0,l.jsxs)("span",{children:[Math.floor(w/60)," мин"]})})]})]}),c&&(0,l.jsx)("button",{onClick:()=>c(!p),className:"flex-shrink-0 w-6 h-6 rounded-md border-2 border-white/50 hover:border-white transition-colors flex items-center justify-center mr-2","aria-label":p?"Отметить как невыполненное":"Отметить как выполненное",children:p&&(0,l.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,l.jsx)("button",{onClick:d,className:"flex-shrink-0 p-1.5 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Закрыть",children:(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[k.length>0&&(0,l.jsx)("div",{className:"flex flex-col items-center bg-purple-50 py-4",children:(0,l.jsx)("div",{className:"w-full max-w-[400px] px-4 md:px-0",children:(0,l.jsxs)("div",{className:"relative w-full",children:[(null==N?void 0:N.type)==="image"&&(0,l.jsx)("div",{className:"absolute top-4 left-4 right-4 z-10",children:(0,l.jsxs)("div",{className:"bg-purple-600/95 text-white text-sm px-4 py-2.5 rounded-lg text-center shadow-lg",children:[(0,l.jsx)("p",{className:"font-semibold mb-1",children:"\uD83D\uDCA1 Основное движение"}),(0,l.jsxs)("p",{className:"text-xs opacity-90",children:["Ознакомьтесь с видео инструкцией",k.length>1&&", нажмите на стрелочку вправо"]})]})}),N&&(0,l.jsx)("div",{className:"w-full",children:"video"===N.type?"video"===N.videoType?(0,l.jsx)("video",{src:N.embedUrl,controls:!0,controlsList:"nodownload nofullscreen noremoteplayback",disablePictureInPicture:!0,className:"w-full aspect-square object-contain bg-white rounded-lg",playsInline:!0,onError:()=>F(x),onContextMenu:e=>e.preventDefault()}):(0,l.jsxs)("div",{className:"jsx-100156e96e85fe95 w-full aspect-square bg-white rounded-lg overflow-hidden relative",children:[(0,l.jsx)("iframe",{src:N.embedUrl,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onError:()=>F(x),className:"jsx-100156e96e85fe95 w-full h-full"}),(0,l.jsx)("div",{style:{height:"20%",zIndex:10},onClick:e=>e.stopPropagation(),className:"jsx-100156e96e85fe95 absolute top-0 left-0 right-0 pointer-events-auto bg-transparent"}),(null===(t=N.embedUrl)||void 0===t?void 0:t.includes("youtube.com"))?(0,l.jsx)("div",{style:{right:"48px",width:"100px",height:"48px",zIndex:10},onClick:e=>e.stopPropagation(),className:"jsx-100156e96e85fe95 absolute bottom-0 pointer-events-auto bg-transparent"}):(null===(r=N.embedUrl)||void 0===r?void 0:r.includes("vimeo.com"))?(0,l.jsx)("div",{style:{width:"80px",height:"80px",zIndex:10},onClick:e=>e.stopPropagation(),className:"jsx-100156e96e85fe95 absolute bottom-0 right-0 pointer-events-auto bg-transparent"}):null,(0,l.jsx)(o(),{id:"100156e96e85fe95",children:'.vp-sidedock,.vp-title,.vp-byline,.vp-portrait,.vp-badge,.vp-sidedock-button{display:none!important;opacity:0!important;visibility:hidden!important}iframe[src*="youtube.com"] .ytp-title,iframe[src*="youtube.com"] .ytp-chrome-top,iframe[src*="youtube.com"] .ytp-show-cards-title,iframe[src*="youtube.com"] .ytp-watermark{display:none!important;pointer-events:none!important}'})]}):(0,l.jsx)("div",{className:"w-full aspect-square flex items-center justify-center bg-white rounded-lg p-4",children:(0,l.jsx)("div",{className:"relative w-1/2 h-1/2",children:(0,l.jsx)(a(),{src:N.contentPath,alt:f,fill:!0,className:"object-contain",onError:()=>F(x)})})})},N.id),k.length>1&&(0,l.jsxs)(l.Fragment,{children:[x>0&&(0,l.jsx)("button",{onClick:()=>{h(e=>Math.max(0,e-1))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all z-10","aria-label":"Предыдущее",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),x<k.length-1&&(0,l.jsx)("button",{onClick:()=>{h(e=>Math.min(k.length-1,e+1))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all z-10","aria-label":"Следующее",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,l.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:k.map((e,t)=>(0,l.jsx)("button",{onClick:()=>h(t),className:"w-2 h-2 rounded-full transition-all ".concat(t===x?"bg-white w-6":"bg-white/50 hover:bg-white/75"),"aria-label":"Перейти к ".concat(t+1)},t))})]})]})})}),y&&(0,l.jsx)("div",{className:"p-4 md:p-6",children:(0,l.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:text-purple-900 prose-headings:font-bold prose-p:text-gray-700 prose-p:leading-relaxed prose-a:text-purple-600 prose-a:no-underline hover:prose-a:underline prose-strong:text-gray-900 prose-strong:font-semibold prose-ul:list-disc prose-ol:list-decimal prose-li:text-gray-700 prose-li:my-1 prose-blockquote:border-l-4 prose-blockquote:border-purple-400 prose-blockquote:pl-4 prose-blockquote:italic",dangerouslySetInnerHTML:{__html:y}})}),(0,l.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50",children:[(0,l.jsxs)("button",{onClick:()=>m(!u),className:"w-full px-4 md:px-6 py-3 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,l.jsx)("span",{className:"text-base font-semibold text-gray-900",children:"Комментарии"}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"(скоро)"})]}),(0,l.jsx)("svg",{className:"w-5 h-5 text-gray-500 transition-transform ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,l.jsx)("div",{className:"px-4 md:px-6 pb-6 pt-2",children:(0,l.jsx)("div",{className:"text-sm text-gray-500 text-center py-8 bg-white rounded-lg border border-gray-200",children:"\uD83D\uDCDD Раздел комментариев будет доступен в следующей версии"})})]})]}),(0,l.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 px-4 md:px-6 py-3 bg-white",children:(0,l.jsx)("button",{onClick:d,className:"w-full px-6 py-2.5 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors",children:"Закрыть"})})]})})}},3224:function(e,t,r){r.d(t,{Z:function(){return s}});var l=r(5893);function s(e){let{exercise:t,uniqueId:r,isActive:s,isDone:o,isChanging:n,onToggle:i,onCheck:a,onDetailClick:d}=e,{exerciseName:c,marathonExerciseName:p,isNew:u,blockExercise:m}=t;return(0,l.jsxs)("div",{className:"border-2 rounded-lg transition-all ".concat(m?"bg-gray-100 border-gray-300":u?"bg-green-50 border-green-300":o?"bg-purple-50 border-purple-300":"bg-white border-gray-200"," ").concat(m?"opacity-60 cursor-not-allowed":"hover:shadow-md"),children:[(0,l.jsxs)("div",{className:"flex items-center p-3 space-x-3",children:[(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},disabled:m||n,className:"flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-all ".concat(m?"border-gray-300 cursor-not-allowed":o?"bg-purple-600 border-purple-600":"border-gray-400 hover:border-purple-600"),children:n?(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}):o?(0,l.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):null}),(0,l.jsx)("button",{onClick:i,className:"flex-1 text-left min-w-0 cursor-pointer",children:(0,l.jsx)("p",{className:"text-sm font-medium ".concat(m?"text-gray-400":o?"text-gray-500":"text-gray-900"," truncate"),children:c})}),u&&!m&&(0,l.jsx)("span",{className:"flex-shrink-0 px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Новое"}),(0,l.jsx)("button",{onClick:i,className:"flex-shrink-0 text-gray-400 transition-transform ".concat(s?"rotate-180":""," hover:text-gray-600"),children:(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),s&&(0,l.jsx)("div",{className:"px-3 pb-3 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"pt-3 space-y-3",children:[t.description&&(0,l.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3",children:(()=>{let e=t.description.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim().split("\n").map(e=>e.trim()).filter(e=>e);if(e.length>1&&e[0].length<100){let t=e[0].toLowerCase(),r=c.toLowerCase();(t===r||t.includes(r)&&t.length<80)&&e.shift()}return e.join(" ")})()}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.type&&(0,l.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),(0,l.jsx)("span",{children:"Video"===t.type?"Видео":"Reading"===t.type?"Теория":"Практика"})]}),t.duration>0&&(0,l.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsxs)("span",{children:[Math.floor(t.duration/60)," мин"]})]}),t.commentsCount>0&&(0,l.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),(0,l.jsxs)("span",{children:[t.commentsCount," комментариев"]})]})]}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"w-full px-4 py-2 text-sm font-medium text-purple-600 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:"Посмотреть детали"})]})})]})}}}]);