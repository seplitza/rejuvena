(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(6401)}])},6401:function(e,s,t){"use strict";t.r(s);var a=t(5893),l=t(7294),r=t(1163),i=t(9133),n=t(3031),d=t(803),c=t(8256),x=t(7963),o=t(5635);s.default=()=>{let e=(0,r.useRouter)(),s=(0,i.T)(),{user:t,isAuthenticated:m}=(0,i.C)(e=>e.auth),[u,p]=(0,l.useState)([]);return((0,l.useEffect)(()=>{m||e.push("/auth/login")},[m,e]),(0,l.useEffect)(()=>{let e=async()=>{try{let e=await d.WY.get(c.fI);e.payments&&p(e.payments.slice(0,5))}catch(e){console.error("Failed to load payments:",e)}};m&&(console.log("\uD83D\uDD0D Dashboard user data:",{isPremium:null==t?void 0:t.isPremium,premiumEndDate:null==t?void 0:t.premiumEndDate,premiumEndDateType:typeof(null==t?void 0:t.premiumEndDate),fullUser:t}),e())},[m,t]),m)?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Личный кабинет"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)("button",{onClick:()=>{m&&(s((0,n.kS)()),d.VH.remove()),e.push("/auth/login")},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:m?"Выйти":"Войти"})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Добро пожаловать, ",(null==t?void 0:t.firstName)||"Гость","!"]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Email: ",(null==t?void 0:t.email)||"Не указан"]})]}),(null==t?void 0:t.isPremium)?(0,a.jsx)("div",{className:"mb-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg shadow-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"✨ Премиум доступ активен"}),(0,a.jsxs)("p",{className:"text-purple-100",children:["Активен до: ",(null==t?void 0:t.premiumEndDate)?new Date(t.premiumEndDate).toLocaleDateString("ru-RU"):"неизвестно"]}),(null==t?void 0:t.premiumEndDate)&&(0,a.jsxs)("p",{className:"text-purple-100 mt-1",children:["Осталось дней: ",Math.max(0,Math.ceil((new Date(t.premiumEndDate).getTime()-new Date().getTime())/864e5))]}),(0,a.jsx)("p",{className:"text-purple-100 mt-1",children:"\uD83C\uDFAF Полный доступ ко всем упражнениям и материалам"})]}),(0,a.jsx)("div",{className:"text-6xl",children:"\uD83D\uDC51"})]})}):(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(o.Z,{})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-3 p-4 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors text-left group border border-purple-200",onClick:()=>e.push("/courses"),children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCDA"}),(0,a.jsx)("span",{className:"text-base font-medium text-gray-800 group-hover:text-purple-600",children:"Мои курсы"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-3 p-4 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors text-left group border border-purple-200",onClick:()=>e.push("/exercises"),children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83C\uDFCB️"}),(0,a.jsx)("span",{className:"text-base font-medium text-gray-800 group-hover:text-purple-600",children:"Упражнения"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-3 p-4 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors text-left group border border-purple-200",onClick:()=>e.push("/photo-diary"),children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCF8"}),(0,a.jsx)("span",{className:"text-base font-medium text-gray-800 group-hover:text-purple-600",children:"Фото-дневник"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-3 p-4 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors text-left group border border-purple-200",onClick:()=>e.push("/profile/settings"),children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDC64"}),(0,a.jsx)("span",{className:"text-base font-medium text-gray-800 group-hover:text-purple-600",children:"Профиль"})]})]})}),m&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Последняя активность"}),0===u.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-gray-400 text-5xl mb-2",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Активности пока нет"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Начните с выбора курса!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:u.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:"succeeded"===e.status?"✅":"processing"===e.status?"⏳":"failed"===e.status?"❌":"⏸️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"succeeded"===e.status?"Оплата принята":"processing"===e.status?"Обработка оплаты":"failed"===e.status?"Оплата не прошла":"Ожидание оплаты"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(null===(s=e.metadata)||void 0===s?void 0:s.planType)==="premium"?"Премиум доступ на ".concat(e.metadata.duration," дней"):(null===(t=e.metadata)||void 0===t?void 0:t.exerciseName)?"Покупка: ".concat(e.metadata.exerciseName):"Покупка"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-800",children:[e.amount," ₽"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ru-RU")})]})]},e.id)})})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Загрузка..."})]})})}}},function(e){e.O(0,[646,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);