(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{7168:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guest",function(){return a(3625)}])},7963:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(5893),r=a(7294),n=a(9133),o=a(7526),i=a(7796);let l=[{code:"ru",name:"Русский",flag:"\uD83C\uDDF7\uD83C\uDDFA"},{code:"en",name:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"}];function d(){let e=(0,n.T)(),t=(0,n.C)(i.Kh),[a,d]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=l.find(e=>e.code===t)||l[0];(0,r.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=t=>{e((0,o.om)(t)),d(!1)};return(0,s.jsxs)("div",{className:"relative",ref:c,children:[(0,s.jsxs)("button",{onClick:()=>d(!a),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors border border-gray-300",children:[(0,s.jsx)("span",{children:u.flag}),(0,s.jsx)("span",{children:u.code.toUpperCase()}),(0,s.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:l.map(e=>(0,s.jsxs)("button",{onClick:()=>x(e.code),className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 transition-colors ".concat(t===e.code?"bg-blue-50 text-[#1e3a8a] font-medium":"text-gray-700"),children:[(0,s.jsx)("span",{className:"text-xl",children:e.flag}),(0,s.jsx)("span",{children:e.name}),t===e.code&&(0,s.jsx)("svg",{className:"w-4 h-4 ml-auto text-[#1e3a8a]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code))})]})}},5871:function(e,t,a){"use strict";a.d(t,{P:function(){return r},T:function(){return s}});let s="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:9527":"https://api-rejuvena.duckdns.org",r={exercises:{public:"".concat(s,"/api/exercises/public"),byId:e=>"".concat(s,"/api/exercises/").concat(e)},courses:{public:"".concat(s,"/api/courses/public"),byId:e=>"".concat(s,"/api/courses/").concat(e)},payment:{create:"".concat(s,"/api/payment/create"),status:e=>"".concat(s,"/api/payment/status/").concat(e)}}},3625:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(5893),r=a(7294),n=a(1163),o=a(9133),i=a(3031),l=a(7963),d=a(645),c=a.n(d),u=a(5871),x=a(2261),m=a(2953);function h(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)([]),[o,i]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("".concat("https://api-rejuvena.duckdns.org","/api/marathons")),t=await e.json();t.success&&t.marathons&&a(t.marathons)}catch(e){console.error("Failed to fetch marathons:",e)}finally{i(!1)}},p=async()=>{d("premium");try{var t;let a=localStorage.getItem("auth_token");if(!a){alert("Необходимо войти в систему"),e.push("/auth/login");return}let s=await fetch(u.P.payment.create,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({amount:990,description:"Премиум подписка на 30 дней",planType:"premium",duration:30})}),r=await s.json();r.success&&(null===(t=r.payment)||void 0===t?void 0:t.paymentUrl)?window.location.href=r.payment.paymentUrl:alert(r.error||"Ошибка создания платежа")}catch(e){console.error("Payment error:",e),alert("Ошибка при создании платежа")}finally{d(null)}},f=async t=>{if(t.isPaid){d(t._id);try{var a;let s=localStorage.getItem("auth_token");if(!s){alert("Необходимо войти в систему"),e.push("/auth/login");return}let r=await fetch(u.P.payment.create,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({amount:t.cost,description:"Марафон: ".concat(t.title),planType:"marathon",marathonId:t._id})}),n=await r.json();n.success&&(null===(a=n.payment)||void 0===a?void 0:a.paymentUrl)?window.location.href=n.payment.paymentUrl:alert(n.error||"Ошибка создания платежа")}catch(e){console.error("Payment error:",e),alert("Ошибка при создании платежа")}finally{d(null)}}else e.push("/marathons/".concat(t._id))},b=e=>0===e?"Бесконечный марафон":e%10==1&&e%100!=11?"".concat(e," день"):[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"".concat(e," дня"):"".concat(e," дней");if(o)return(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});let g=[{id:"premium",title:"Премиум доступ",subtitle:"Полный доступ ко всем упражнениям",badge:"⭐ Популярный",badgeColor:"bg-yellow-400 text-yellow-900",gradient:"from-purple-600 to-pink-600",borderColor:"border-purple-200 hover:border-purple-400",buttonGradient:"from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",price:990,priceLabel:"/ месяц",buttonText:"Оплатить 990 ₽",features:[{title:"Полное видео-инструкция",description:"Детальная демонстрация каждого упражнения"},{title:"Доступ на 1 месяц",description:"30 дней автоматического доступа"},{title:"Все категории упражнений",description:"100+ видео, лицо, шея, тело + другое"}]},...t.map(e=>({id:e._id,title:e.title,subtitle:e.description||"Марафон омоложения",badge:e.isPaid?null:"\uD83C\uDF81 Бесплатно",badgeColor:"bg-green-400 text-green-900",gradient:"from-blue-600 to-cyan-600",borderColor:"border-blue-200 hover:border-blue-400",buttonGradient:e.isPaid?"from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700":"from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700",price:e.isPaid?e.cost:null,priceLabel:e.isPaid?"разовый платеж":null,buttonText:e.isPaid?"Оплатить ".concat(e.cost," ₽"):"Присоединиться бесплатно",isPaidMarathon:e.isPaid,features:[{title:"Длительность",description:b(e.numberOfDays)},{title:"Старт марафона",description:new Date(e.startDate).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},{title:0===e.numberOfDays?"Каждый день":"Ежедневные упражнения",description:0===e.numberOfDays?"Одинаковый набор упражнений каждый день":"Новые упражнения каждый день"}],marathonData:e}))],j=async e=>{"premium"===e.id?await p():e.marathonData&&await f(e.marathonData)};return(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad mb-6 offers-slider-container",children:[(0,s.jsx)(c(),{id:"d124a106eaf2e4ad",children:".offers-slider-container .swiper{padding:20px 10px 50px}.offers-slider-container .swiper-slide{height:auto;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.offers-slider-container .swiper-button-prev,.offers-slider-container .swiper-button-next{color:#9333ea;background:white;width:40px;height:40px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-box-shadow:0 4px 6px rgba(0,0,0,.1);-moz-box-shadow:0 4px 6px rgba(0,0,0,.1);box-shadow:0 4px 6px rgba(0,0,0,.1)}.offers-slider-container .swiper-button-prev:after,.offers-slider-container .swiper-button-next:after{font-size:18px;font-weight:bold}.offers-slider-container .swiper-pagination-bullet{background:#9333ea;opacity:.5}.offers-slider-container .swiper-pagination-bullet-active{opacity:1;background:#9333ea}"}),(0,s.jsx)(x.tq,{modules:[m.lI,m.W_,m.tl,m.pt],effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:10,stretch:0,depth:150,modifier:1.5,slideShadows:!0},navigation:!0,pagination:{clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:30},1024:{slidesPerView:3,spaceBetween:30}},className:"offers-swiper",children:g.map(e=>(0,s.jsx)(x.o5,{style:{width:"350px",maxWidth:"90vw"},children:(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad "+"bg-white rounded-2xl shadow-2xl overflow-hidden border-2 ".concat(e.borderColor," transition-all duration-300 h-full flex flex-col"),children:[(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad "+"bg-gradient-to-r ".concat(e.gradient," p-6 text-white"),children:[(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"jsx-d124a106eaf2e4ad text-2xl font-bold",children:e.title}),e.badge&&(0,s.jsx)("span",{className:"jsx-d124a106eaf2e4ad "+"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat(e.badgeColor),children:e.badge})]}),(0,s.jsx)("p",{className:"jsx-d124a106eaf2e4ad "+(("premium"===e.id?"text-purple-100":"text-blue-100")||""),children:e.subtitle})]}),(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad p-6 flex-grow flex flex-col",children:[(0,s.jsx)("div",{className:"jsx-d124a106eaf2e4ad space-y-4 mb-6 flex-grow",children:e.features.map((e,t)=>(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"jsx-d124a106eaf2e4ad flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-d124a106eaf2e4ad w-4 h-4 text-green-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7",className:"jsx-d124a106eaf2e4ad"})})}),(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad",children:[(0,s.jsx)("h4",{className:"jsx-d124a106eaf2e4ad font-semibold text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"jsx-d124a106eaf2e4ad text-sm text-gray-600",children:e.description})]})]},t))}),(0,s.jsxs)("div",{className:"jsx-d124a106eaf2e4ad border-t pt-6",children:[(0,s.jsx)("div",{className:"jsx-d124a106eaf2e4ad flex items-baseline justify-between mb-4",children:(0,s.jsx)("div",{className:"jsx-d124a106eaf2e4ad",children:null!==e.price?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"jsx-d124a106eaf2e4ad text-4xl font-bold text-gray-900",children:[e.price," ₽"]}),(0,s.jsx)("span",{className:"jsx-d124a106eaf2e4ad text-gray-600 ml-2",children:e.priceLabel})]}):"premium"!==e.id&&(0,s.jsx)("span",{className:"jsx-d124a106eaf2e4ad text-4xl font-bold text-green-600",children:"Бесплатно"})})}),(0,s.jsx)("button",{onClick:()=>j(e),disabled:l===e.id,className:"jsx-d124a106eaf2e4ad "+"w-full bg-gradient-to-r ".concat(e.buttonGradient," text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"),children:l===e.id?"Обработка...":e.buttonText}),("premium"===e.id||"isPaidMarathon"in e&&e.isPaidMarathon)&&(0,s.jsx)("p",{className:"jsx-d124a106eaf2e4ad text-xs text-gray-500 text-center mt-3",children:"Безопасная оплата через Альфа-Банк"})]})]})]})},e.id))})]})}a(4172),a(633),a(7638),a(6936);var p=()=>{let e=(0,n.useRouter)(),t=(0,o.T)(),{isAuthenticated:a}=(0,o.C)(e=>e.auth);return(0,r.useEffect)(()=>{if(a){e.push("/dashboard");return}t((0,i.SH)())},[a,t,e]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Личный кабинет"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("button",{onClick:()=>e.push("/auth/login"),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:"Вход"})]})]})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Добро пожаловать, Гость!"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Email: Не указан"})]}),(0,s.jsx)(h,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>e.push("/exercises"),className:"p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDFAF"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Упражнения"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Просмотр доступных упражнений"})]}),(0,s.jsxs)("button",{onClick:()=>e.push("/photo-diary"),className:"p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF8"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Фото-дневник"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Отслеживайте свой прогресс"})]}),(0,s.jsxs)("button",{onClick:()=>e.push("/profile/settings"),className:"p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDC64"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Профиль"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Настройки аккаунта"})]}),(0,s.jsxs)("button",{onClick:()=>e.push("/auth/login"),className:"p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-left border-2 border-purple-300",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDD10"}),(0,s.jsx)("h3",{className:"font-semibold text-purple-600 mb-1",children:"Войти"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Получить полный доступ"})]})]})]})]})}},7796:function(e,t,a){"use strict";a.d(t,{JB:function(){return h},Kh:function(){return x},LJ:function(){return m},aJ:function(){return d},gi:function(){return p},h3:function(){return g},ks:function(){return l},sy:function(){return o},z5:function(){return f}});var s=a(8697);let r=e=>e.courses,n=(0,s.P1)([r],e=>e.myOrders),o=n,i=(0,s.P1)([n],e=>e.filter(e=>"Approved"===e.orderStatus||"Active"===e.status||!0===e.isPurchased)),l=(0,s.P1)([r],e=>e.loadingOrders);(0,s.P1)([r],e=>e.ordersError);let d=(0,s.P1)([r],e=>e.activatingOrderId),c=(0,s.P1)([r],e=>e.availableCourses),u=(0,s.P1)([r],e=>e.demoCourses);(0,s.P1)([c,u],(e,t)=>[...e,...t]);let x=(0,s.P1)([r],e=>e.selectedLanguage),m=(0,s.P1)([c,x],(e,t)=>e.filter(e=>e.languageCulture===t)),h=(0,s.P1)([u,x],(e,t)=>e.filter(e=>e.languageCulture===t)),p=(0,s.P1)([r],e=>e.loadingCourses);(0,s.P1)([r],e=>e.coursesError);let f=(0,s.P1)([r],e=>e.selectedCourse);(0,s.P1)([r],e=>e.coursePlans),(0,s.P1)([r],e=>e.loadingDetails),(0,s.P1)([r],e=>e.detailsError);let b=(0,s.P1)([r],e=>e.marathons);(0,s.P1)([r],e=>e.loadingMarathon),(0,s.P1)([r],e=>e.marathonError);let g=(0,s.P1)([i,b],(e,t)=>e.map(e=>{var a,s,r;let n=e.wpMarathonId||e.marathonId||e.id;return{...e,marathonId:n,marathon:t[n],progress:(null===(a=t[n])||void 0===a?void 0:a.progress)||0,completedDays:(null===(s=t[n])||void 0===s?void 0:s.completedDays)||0,totalDays:(null===(r=t[n])||void 0===r?void 0:r.totalDays)||e.days||0}}))}},function(e){e.O(0,[258,888,774,179],function(){return e(e.s=7168)}),_N_E=e.O()}]);