(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{3847:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marathons",function(){return n(2513)}])},5871:function(e,t,n){"use strict";n.d(t,{CT:function(){return r},Pn:function(){return o},T5:function(){return i}});let i="https://api-rejuvena.duckdns.org",r=i,o={exercises:{public:"".concat(i,"/api/exercises/public"),byId:e=>"".concat(i,"/api/exercises/").concat(e)},courses:{public:"".concat(i,"/api/courses/public"),byId:e=>"".concat(i,"/api/courses/").concat(e)},payment:{create:"".concat(i,"/api/payment/create"),status:e=>"".concat(i,"/api/payment/status/").concat(e)}}},2513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(5893),r=n(7294),o=n(1163),s=n(9133),l=n(5871);function a(){let e=(0,o.useRouter)(),{isAuthenticated:t,user:n}=(0,s.C)(e=>e.auth),[a,d]=(0,r.useState)([]),[c,x]=(0,r.useState)(!0),[p,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{x(!0);let e=await fetch("".concat(l.T5,"/api/marathons"));if(!e.ok)throw Error("Failed to load marathons: ".concat(e.statusText));let t=(await e.json()).marathons||[];d(t),u(null)}catch(e){console.error("Error loading marathons:",e),u(e instanceof Error?e.message:"Не удалось загрузить марафоны")}finally{x(!1)}},g=(e,t)=>{let n=new Date,i=new Date(e),r=new Date(i.getTime()+864e5*t);if(n<i){let e=Math.ceil((i.getTime()-n.getTime())/864e5);return{text:"Начнётся через ".concat(e," ").concat(f(e)),color:"#F59E0B",status:"upcoming"}}if(n>r)return{text:"Завершён",color:"#6B7280",status:"finished"};let o=Math.floor((n.getTime()-i.getTime())/864e5);return{text:"День ".concat(o+1," из ").concat(t),color:"#10B981",status:"active"}},f=e=>e%10==1&&e%100!=11?"день":[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"дня":"дней",m=e=>{let t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(t)},y=t=>{e.push("/marathons/".concat(t))};if(c)return(0,i.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:(0,i.jsx)("div",{style:{fontSize:"18px",color:"#6B7280"},children:"Загрузка марафонов..."})});if(p)return(0,i.jsxs)("div",{style:{padding:"40px",textAlign:"center"},children:[(0,i.jsxs)("div",{style:{fontSize:"18px",color:"#DC2626",marginBottom:"16px"},children:["❌ ",p]}),(0,i.jsx)("button",{onClick:h,style:{padding:"10px 20px",background:"#4F46E5",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:"Попробовать снова"})]});let b=a.filter(e=>e.isDisplay);return(0,i.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"40px 20px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,i.jsx)("h1",{style:{fontSize:"36px",fontWeight:"bold",marginBottom:"12px",color:"#111827"},children:"\uD83C\uDFC3 Марафоны Омоложения"}),(0,i.jsx)("p",{style:{fontSize:"18px",color:"#6B7280",lineHeight:"1.6"},children:"Присоединяйтесь к марафонам с фиксированной датой старта. Все участники проходят программу синхронно!"})]}),0===b.length?(0,i.jsxs)("div",{style:{padding:"60px 20px",textAlign:"center",background:"#F9FAFB",borderRadius:"16px"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83C\uDFC3"}),(0,i.jsx)("div",{style:{fontSize:"20px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Марафоны скоро появятся"}),(0,i.jsx)("div",{style:{fontSize:"16px",color:"#6B7280"},children:"Мы готовим для вас интересные программы. Следите за обновлениями!"})]}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:b.map(e=>{let t=g(e.startDate,e.tenure);return(0,i.jsxs)("div",{onClick:()=>y(e._id),style:{background:"white",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",border:e.userEnrolled?"2px solid #10B981":"1px solid #E5E7EB"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative"},children:[(0,i.jsx)("div",{style:{position:"absolute",top:"12px",right:"12px",background:t.color,color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:t.text}),(0,i.jsx)("h3",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px",paddingRight:"100px"},children:e.title}),(0,i.jsxs)("div",{style:{fontSize:"14px",opacity:.9},children:["\uD83D\uDCC5 Старт: ",m(e.startDate)]})]}),(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Продолжительность"}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:[e.tenure," ",f(e.tenure)]})]}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Упражнений"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#111827"},children:e.numberOfDays})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[e.hasContest&&(0,i.jsx)("span",{style:{padding:"4px 10px",background:"#FEF3C7",color:"#92400E",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:"\uD83C\uDFC6 Конкурс"}),(0,i.jsx)("span",{style:{padding:"4px 10px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:"ru"===e.language?"\uD83C\uDDF7\uD83C\uDDFA RU":"\uD83C\uDDEC\uD83C\uDDE7 EN"}),e.userEnrolled&&(0,i.jsx)("span",{style:{padding:"4px 10px",background:"#D1FAE5",color:"#065F46",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"✓ Вы участвуете"})]}),(0,i.jsxs)("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"14px",color:"#6B7280"},children:e.isPaid?"Стоимость":"Доступ"}),(0,i.jsx)("div",{style:{fontSize:"20px",fontWeight:"bold",color:e.isPaid?"#4F46E5":"#10B981"},children:e.isPaid?"".concat(e.cost," ₽"):"Бесплатно"})]}),void 0!==e.enrollmentCount&&e.enrollmentCount>0&&(0,i.jsxs)("div",{style:{marginTop:"12px",fontSize:"13px",color:"#6B7280",textAlign:"center"},children:["\uD83D\uDC65 ",e.enrollmentCount," ",1===e.enrollmentCount?"участник":"участников"]})]})]},e._id)})}),b.length>0&&(0,i.jsxs)("div",{style:{marginTop:"60px",padding:"24px",background:"#EEF2FF",borderRadius:"12px",border:"1px solid #C7D2FE"},children:[(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#4F46E5",marginBottom:"12px"},children:"\uD83D\uDCA1 Как это работает?"}),(0,i.jsxs)("ul",{style:{margin:0,paddingLeft:"20px",color:"#374151",lineHeight:"1.8"},children:[(0,i.jsx)("li",{children:"Все участники марафона начинают в одну дату"}),(0,i.jsx)("li",{children:"Новые дни открываются автоматически по расписанию"}),(0,i.jsx)("li",{children:"Синхронное прохождение создаёт эффект группы поддержки"}),(0,i.jsx)("li",{children:"Конкурсы и голосования проходят одновременно для всех"})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3847)}),_N_E=e.O()}]);