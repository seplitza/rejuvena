(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{2748:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exercise_template",function(){return r(4293)}])},4293:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var s=r(5893),l=r(7294),a=r(1163),i=r(5675),o=r.n(i);function n(){let e=(0,a.useRouter)(),[t,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(""),p=(0,l.useRef)(null),[x,h]=(0,l.useState)([{id:"1",userName:"Елена В.",userAvatar:"https://ui-avatars.com/api/?name=Elena+V&background=9333ea&color=fff",text:"После выполнения этого упражнения чувствую легкость в шее и голове. Очень помогает при работе за компьютером!",date:"28 декабря 2025"},{id:"2",userName:"Ирина М.",userAvatar:"https://ui-avatars.com/api/?name=Irina+M&background=ec4899&color=fff",text:"Делаю это упражнение каждое утро. Главное не торопиться и делать все плавно.",date:"27 декабря 2025"}]),f={exerciseName:"Вращения",marathonExerciseName:"головой",description:"HTML описание упражнения из базы данных будет здесь",category:"Разминка",videoUrl:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"};(0,l.useEffect)(()=>{let e=()=>{d(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]);let v=async()=>{if(p.current)try{c?await document.exitFullscreen():await p.current.requestFullscreen()}catch(e){console.error("Fullscreen error:",e)}},b=async()=>{if(!i)try{n(!0),r(!t),await new Promise(e=>setTimeout(e,500)),console.log("✅ Exercise completion status updated:",!t)}catch(e){console.error("❌ Failed to update exercise status:",e),r(!t)}finally{n(!1)}},{embedUrl:w,type:g}=function(e){var t,r,s,l,a,i;if(!e)return{embedUrl:"",type:"iframe"};if(e.match(/\.(mp4|webm|ogg|mov)$/i))return{embedUrl:e,type:"video"};if(e.includes("youtube.com")||e.includes("youtu.be")){let r=e.includes("youtu.be")?null===(t=e.split("youtu.be/")[1])||void 0===t?void 0:t.split("?")[0]:new URL(e).searchParams.get("v");return{embedUrl:"https://www.youtube.com/embed/".concat(r),type:"iframe"}}if(e.includes("vimeo.com")){let t=null===(r=e.split("vimeo.com/")[1])||void 0===r?void 0:r.split("?")[0];return{embedUrl:"https://player.vimeo.com/video/".concat(t),type:"iframe"}}if(e.includes("rutube.ru")){let t=null===(s=e.split("rutube.ru/video/")[1])||void 0===s?void 0:s.split("?")[0];return t||(t=null===(l=e.split("rutube.ru/play/embed/")[1])||void 0===l?void 0:l.split("?")[0]),{embedUrl:"https://rutube.ru/play/embed/".concat(t),type:"iframe"}}if(e.includes("vk.com/video")){let t=e.match(/video(-?\d+)_(\d+)/);if(t){let[,e,r]=t;return{embedUrl:"https://vk.com/video_ext.php?oid=".concat(e,"&id=").concat(r),type:"iframe"}}}if(e.includes("dzen.ru")){let t=(null===(a=e.split("dzen.ru/video/watch/")[1])||void 0===a?void 0:a.split("?")[0])||(null===(i=e.split("dzen.ru/embed/")[1])||void 0===i?void 0:i.split("?")[0]);if(t)return{embedUrl:"https://dzen.ru/embed/".concat(t),type:"iframe"}}return e.includes("t.me"),{embedUrl:e,type:"iframe"}}(f.videoUrl);return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,s.jsx)("header",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"p-2 hover:bg-white/10 rounded-lg transition-colors flex-shrink-0","aria-label":"Назад",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("h1",{className:"text-lg font-bold truncate",children:[(0,s.jsx)("span",{className:"font-bold",children:f.exerciseName})," ",f.marathonExerciseName]}),(0,s.jsx)("p",{className:"text-sm text-white/80",children:f.category})]}),(0,s.jsx)("button",{onClick:b,disabled:i,className:"flex-shrink-0 w-10 h-10 rounded-lg border-2 flex items-center justify-center transition-all ".concat(t?"bg-white border-white":"border-white/50 hover:border-white hover:bg-white/10"),"aria-label":t?"Отменить выполнение":"Отметить как выполненное",children:i?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):t?(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):null})]})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:(0,s.jsxs)("div",{ref:p,className:"relative w-full max-w-[400px] mx-auto ".concat(c?"max-w-full":""),style:{paddingBottom:c?"56.25%":"min(100%, 400px)"},children:["video"===g?(0,s.jsx)("video",{className:"absolute top-0 left-0 w-full h-full rounded-lg object-cover",src:w,controls:!0,playsInline:!0,title:"".concat(f.exerciseName," ").concat(f.marathonExerciseName)}):(0,s.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-lg",src:w,title:"".concat(f.exerciseName," ").concat(f.marathonExerciseName),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,s.jsx)("button",{onClick:v,className:"absolute bottom-4 right-4 bg-black/60 hover:bg-black/80 text-white p-2 rounded-lg transition-all z-10","aria-label":c?"Выйти из полноэкранного режима":"На весь экран",children:c?(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 px-6 py-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-purple-900",children:"Описание упражнения"})}),(0,s.jsx)("div",{className:"px-6 py-6",children:(0,s.jsx)("div",{className:"prose prose-purple max-w-none",dangerouslySetInnerHTML:{__html:f.description}})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 px-6 py-4",children:(0,s.jsxs)("h2",{className:"text-xl font-bold text-purple-900",children:["Комментарии (",x.length,")"]})}),(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&(h([{id:Date.now().toString(),userName:"Вы",userAvatar:"https://ui-avatars.com/api/?name=You&background=3b82f6&color=fff",text:u,date:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},...x]),m(""))},children:[(0,s.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Поделитесь своими впечатлениями об упражнении...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent resize-none",rows:3}),(0,s.jsx)("div",{className:"mt-3 flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:!u.trim(),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Отправить"})})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:0===x.length?(0,s.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"Комментариев пока нет. Будьте первым!"}):x.map(e=>(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,s.jsx)(o(),{src:e.userAvatar,alt:e.userName,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.userName}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.date})]}),(0,s.jsx)("p",{className:"mt-1 text-gray-700",children:e.text})]})]})},e.id))})]})]})]})}}},function(e){e.O(0,[675,888,774,179],function(){return e(e.s=2748)}),_N_E=e.O()}]);